#!/usr/bin/env python3

import os
import glob
from os import path

dash_configs = [
    # [width, height, bitrate, id]
    [3840, 2160, 17408000, '4k'],
    [2560, 1440, 6144000, '2k'],
    [1920, 1080, 4300000, '1920p'],
    [1280, 720, 2850000, '1280p'],
    [1024, 576, 1850000, '1024p'],
    [768, 432, 1200000, '768p'],
    [640, 360, 750000, '640p'],
    [320, 180, 300000, '320p']
]

TOTAL_VIDEO_CHUNkS = 61
BITRATE_LEVELS = dash_configs.__len__()
VIDEO_PATH = path.join('output_videos', 'bmpcc4k')

# assume videos are inside $VIDEO_PATH and format is segment_[id]_[chunk].m4s

chunk_size_list = []
for idx, config in enumerate(dash_configs):
    files = glob.glob(path.join(VIDEO_PATH, f"segment_{config[3]}_*.m4s"))
    assert files.__len__() == TOTAL_VIDEO_CHUNkS
    chunk_sizes = []
    for chunk_id in range(1, TOTAL_VIDEO_CHUNkS + 1):
        file_path = path.join(VIDEO_PATH, f"segment_{config[3]}_{chunk_id}.m4s")
        chunk_size = os.path.getsize(file_path)
        chunk_sizes.append(chunk_size)
    print(f"video{idx + 1} = ", chunk_sizes)
    chunk_size_list.append(chunk_sizes)

# add code if you want to store chunk sizes in a file
## generate chunk sizes are copied here
video1 = [8984252, 8812499, 8207776, 8360161, 8605612, 8719429, 6829108, 8375548, 10569172, 6029581, 11249173, 4139129,
          13581050, 11763286, 12048267, 10367711, 10417649, 9217558, 9599223, 6710001, 5114103, 4851074, 8270843,
          7639317, 5784803, 8106221, 8989096, 6803489, 8612841, 8084730, 9850664, 7434155, 9040566, 13507628, 11097191,
          5320379, 9946759, 9323424, 5961885, 5127326, 7304721, 7179033, 12687276, 10207337, 11911044, 14335586,
          10376870, 7035694, 10449867, 12966473, 6313654, 7219588, 7727482, 10945677, 7740836, 7408441, 8399356,
          8814231, 6328902, 4995662, 366883]
video2 = [2973395, 3216338, 2923304, 2991183, 3068026, 3079690, 2596636, 3627557, 3500919, 2017353, 4069880, 1451161,
          4466516, 4093130, 3923791, 3246824, 3439277, 3151552, 3449206, 2849448, 1806035, 1506152, 3139646, 2743841,
          2918123, 3196667, 3582019, 2124905, 2979569, 2663315, 2892353, 2341279, 3016363, 4532494, 3800892, 1795524,
          3592102, 3172099, 1939284, 2031102, 2720491, 2385364, 4518933, 3407953, 4031712, 5623731, 3697103, 2426202,
          3334027, 4233552, 2526030, 2755094, 3052783, 3933755, 2927851, 2808021, 2996183, 3103916, 2091032, 1540102,
          154758]
video3 = [2026874, 2282622, 2045115, 2078942, 2149025, 2173872, 1756976, 2412694, 2464913, 1448736, 2978791, 1053082,
          3100445, 2911278, 2780758, 2333980, 2432248, 2176277, 2434200, 1898618, 1250449, 1045211, 2193109, 1856435,
          1862612, 2153393, 2499274, 1520022, 2138602, 1945277, 2035411, 1626990, 2082955, 3185501, 2695408, 1260675,
          2500537, 2234789, 1364394, 1350392, 1852865, 1664143, 3227678, 2407657, 2880554, 4038757, 2649872, 1671868,
          2384352, 2986638, 1770744, 1881609, 2039295, 2796603, 2048545, 1990648, 2147194, 2223990, 1480811, 1080469,
          109544]
video4 = [1196619, 1505626, 1341083, 1329507, 1395656, 1402782, 1257823, 1712055, 1553636, 984034, 2009347, 783864,
          2101627, 1850158, 1859476, 1533260, 1595053, 1360348, 1530079, 1189500, 808171, 749214, 1493407, 1261340,
          1312352, 1525448, 1699108, 1081087, 1498050, 1253424, 1386312, 1050765, 1254697, 2072603, 1706319, 844645,
          1474916, 1398867, 935215, 1023261, 1276221, 1162066, 2209113, 1416748, 1707709, 2599568, 1759463, 1120791,
          1611226, 1899599, 1191077, 1188536, 1327714, 1606567, 1391626, 1385995, 1484775, 1528801, 1030878, 777915,
          81052]
video5 = [769132, 982320, 847125, 867101, 922201, 927794, 841747, 1071429, 961027, 666674, 1440223, 558530, 1301622,
          1164089, 1215250, 1003362, 1042025, 852339, 975010, 691399, 497360, 499075, 1004708, 797124, 842834, 985112,
          1118262, 738603, 987316, 845712, 910957, 670041, 772068, 1341856, 1124973, 541852, 861806, 862454, 611995,
          675632, 807225, 775145, 1422398, 940377, 1137107, 1773256, 1124436, 717447, 1005260, 1305479, 795921, 836956,
          884241, 1001960, 905824, 905273, 987581, 1003667, 677789, 491097, 55837]
video6 = [496029, 626184, 563912, 594231, 585818, 609315, 552068, 648719, 623398, 456346, 954901, 403887, 823760,
          755391, 794371, 643906, 668853, 538913, 628136, 396929, 304195, 327404, 663908, 527868, 516798, 664368,
          706359, 466439, 679058, 573279, 601218, 431436, 493402, 869953, 739963, 336555, 562135, 529952, 395600,
          424921, 556671, 487562, 927147, 604572, 778018, 1135471, 724487, 457125, 640249, 901806, 519913, 543084,
          600545, 637925, 588923, 600035, 651092, 665307, 454456, 327876, 37648]
video7 = [306487, 403283, 363863, 371640, 376465, 383921, 330657, 395247, 394371, 302714, 623862, 275667, 489860,
          463956, 476300, 399873, 408170, 346900, 400265, 227233, 178793, 179173, 434704, 328229, 291825, 407310,
          448442, 299424, 417363, 379063, 378277, 260820, 306637, 554729, 475069, 209683, 346581, 318551, 241126,
          255383, 342913, 319241, 625204, 406821, 519272, 689005, 450747, 278181, 426803, 561508, 340810, 357010,
          394244, 381111, 369153, 392169, 429721, 430076, 290579, 200591, 24700]
video8 = [133569, 160130, 145265, 150440, 148305, 159788, 126264, 154522, 162333, 130870, 266367, 129491, 178679,
          177194, 178960, 162651, 164555, 139096, 162192, 75789, 66072, 74207, 179936, 134925, 99636, 154189, 176032,
          125445, 170625, 158231, 157038, 106413, 119272, 219290, 196021, 77430, 144427, 129417, 101688, 100328, 143850,
          131157, 244529, 166772, 213175, 280143, 189589, 116167, 169327, 206082, 145785, 144460, 160326, 144275,
          144142, 167355, 188003, 183946, 120403, 85396, 10033]
