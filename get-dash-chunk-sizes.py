#!/usr/bin/env python3

import os
import glob
from os import path

# dash_configs = [
#     # [width, height, bitrate, id]
#     [3840, 2160, 17408000, '4k'],
#     [2560, 1440, 6144000, '2k'],
#     [1920, 1080, 4300000, '1920p'],
#     [1280, 720, 2850000, '1280p'],
#     # [1024, 576, 1850000, '1024p'],
#     [768, 432, 1200000, '768p'],
#     # [640, 360, 750000, '640p'],
#     [320, 180, 300000, '320p']
# ]
dash_configs = [
    # [width, height, bitrate, id]
    [7680, 4320, 152400000, '8k'],
    [3840, 2160, 32800000, '4k'],
    [2560, 1440, 11700000, '2k'],
    [1920, 1080, 8200000, '1080p'],
    [1280, 720, 4900000, '720p'],
    [640, 360, 1500000, '360p']
]

TOTAL_VIDEO_CHUNkS = 121
BITRATE_LEVELS = dash_configs.__len__()
VIDEO_PATH = path.join('output_videos', 'bmpcc4k')

# assume videos are inside $VIDEO_PATH and format is segment_[id]_[chunk].m4s

chunk_size_list = []
for idx, config in enumerate(dash_configs):
    files = glob.glob(path.join(VIDEO_PATH, f"segment_{config[3]}_*.m4s"))
    assert files.__len__() == TOTAL_VIDEO_CHUNkS
    chunk_sizes = []
    for chunk_id in range(1, TOTAL_VIDEO_CHUNkS + 1):
        file_path = path.join(VIDEO_PATH, f"segment_{config[3]}_{chunk_id}.m4s")
        chunk_size = os.path.getsize(file_path)
        chunk_sizes.append(chunk_size)
    print(f"size_video{idx + 1} = ", chunk_sizes)
    chunk_size_list.append(chunk_sizes)

# add code if you want to store chunk sizes in a file
## generate chunk sizes are copied here
size_video1 = [41313924, 43161530, 38770457, 38678481, 37277126, 33509174, 35948395, 35963190, 35897710, 38850953,
               35232459, 40377414, 36661154, 21661223, 38243607, 34315159, 46734361, 44608844, 39241003, 10727101,
               43706094, 40316410, 20139165, 9343803, 66507577, 62868918, 59311729, 50124272, 61510011, 57651229,
               56681300, 49778904, 49959115, 45998715, 45118932, 37910009, 38462390, 41208932, 23867242, 20388860,
               22787863, 22113847, 24427264, 24282513, 30630072, 38771586, 34252822, 32825116, 14274907, 18673322,
               20556312, 44446394, 41123209, 28820268, 35291176, 30886005, 31903199, 39952228, 42904936, 42784546,
               46608285, 45010010, 44464999, 25988503, 32961159, 47678836, 63845161, 56713615, 50587484, 48990504,
               22053122, 27935566, 30146330, 65496652, 60079112, 28880920, 29113499, 27603917, 20863745, 25165459,
               35134773, 28986990, 31176301, 29906005, 47221581, 52256612, 44088758, 42754507, 44119047, 59032584,
               43372441, 60148321, 44142600, 41551976, 32061806, 34720562, 35234670, 86828312, 79224651, 79258834,
               28008108, 25178660, 30519618, 28659493, 28507956, 29881334, 43759388, 46740663, 37420196, 25837678,
               25908268, 30123693, 32188086, 33389177, 37885492, 33134487, 36397117, 19584030, 21926110, 26104154,
               2314642]
size_video2 = [8903603, 8837308, 8184926, 8333356, 8035965, 7472510, 7787243, 7915183, 7890352, 8333922, 7812610,
               8637653, 7916380, 4667135, 7926995, 7725063, 10093577, 9555963, 8485435, 3067292, 10617957, 8867905,
               5033350, 2070274, 13782054, 12997095, 12434874, 10365312, 11335137, 11985798, 11189123, 9398903, 9888648,
               9988354, 9081436, 8055840, 8486252, 9049659, 5858500, 5453966, 5267456, 4243230, 4752713, 4946914,
               6213863, 9137058, 7652044, 7075706, 4582266, 5156914, 5063274, 10131487, 10146738, 6332301, 7330827,
               6220437, 6760132, 9273821, 7928395, 8003793, 10150263, 8907487, 8256131, 6133010, 7499921, 10283207,
               13704075, 12213939, 10947211, 10148924, 4327336, 6095847, 6332443, 13076788, 12358407, 6093971, 5887529,
               5635988, 4458957, 5354433, 7351026, 6439166, 7015573, 6651002, 11070788, 12308770, 9872083, 9654065,
               9598944, 12962799, 11414296, 13778920, 10078075, 9095852, 6647013, 7238394, 7293967, 13034697, 13920685,
               12896854, 6124976, 5671500, 6704945, 6448171, 6460450, 6906705, 9942007, 10156374, 8512040, 5772294,
               6129325, 7346682, 7621233, 7976969, 8662750, 7765753, 8047001, 3871639, 4359653, 5535895, 631217]
size_video3 = [2757324, 3129734, 3036279, 3014195, 2878492, 2735308, 2869830, 2841699, 2869777, 2993761, 2794001,
               3054197, 2878010, 1920243, 3298222, 3154837, 3497744, 3238606, 2827897, 1154959, 3846880, 3222357,
               1807260, 788615, 4594386, 4309310, 4309911, 3623863, 3365305, 4168278, 3761162, 2758621, 3076972,
               3592799, 3227631, 2847457, 3184879, 3259966, 2670845, 2601191, 2256201, 1375606, 1557987, 1678511,
               2199894, 3543686, 2810290, 2588564, 2563348, 2542036, 2205235, 3650063, 4202731, 2346245, 2356568,
               1950218, 2251216, 3376681, 2522294, 2614019, 3098820, 2767350, 2538259, 2144732, 2532043, 3517362,
               4648287, 4246121, 3820651, 3484789, 1497311, 2134879, 2360003, 4776391, 4404207, 1934275, 1875399,
               1983265, 1745206, 2067378, 2821926, 2167840, 2340713, 2323077, 3999467, 4389152, 3339656, 3402140,
               3275036, 4501386, 4758516, 5191170, 3690819, 3237203, 2340906, 2566660, 2711386, 4260443, 4350366,
               4321828, 2459360, 2237778, 2597143, 2534429, 2637949, 2720917, 3782932, 3835162, 3277578, 2231843,
               2368465, 2743443, 2646816, 2782226, 2990049, 2634341, 2710945, 1169139, 1289457, 1839743, 246914]
size_video4 = [1774505, 2248151, 2125471, 2168577, 2012563, 1911036, 2004550, 1992790, 2029952, 2077618, 1958841,
               2178892, 2011918, 1241761, 2188776, 2068817, 2470084, 2352448, 2035254, 823723, 2781063, 2347664,
               1313901, 553955, 3192970, 2990666, 3051671, 2599389, 2454938, 3030710, 2744087, 2037195, 2225014,
               2543657, 2229353, 1947934, 2247295, 2344855, 1722042, 1627599, 1506222, 993804, 1120201, 1175238,
               1543273, 2432593, 1877434, 1742991, 1554722, 1587620, 1455628, 2531464, 2845384, 1668794, 1706380,
               1438667, 1635408, 2402722, 1819990, 1979765, 2219755, 1969711, 1859322, 1532930, 1841196, 2470728,
               3249288, 2940551, 2668630, 2472337, 1068208, 1467884, 1693864, 3303464, 3075746, 1404832, 1350477,
               1417928, 1200795, 1411473, 1849241, 1529944, 1659614, 1637139, 2810056, 3102278, 2362392, 2386365,
               2344286, 3206958, 3287458, 3679870, 2646825, 2300645, 1611356, 1765195, 1875696, 3151593, 3186205,
               3141123, 1716627, 1542441, 1787520, 1730166, 1837041, 1895681, 2627701, 2651664, 2291287, 1563473,
               1664641, 1941034, 1894490, 1996073, 2133540, 1908855, 1940335, 836205, 929034, 1273849, 171677]
size_video5 = [923208, 1296332, 1279196, 1302011, 1175444, 1193765, 1195093, 1160612, 1216073, 1255162, 1171477,
               1213522, 1223741, 832171, 1397677, 1366003, 1413216, 1308922, 1152822, 547774, 1765050, 1443223, 830756,
               350996, 1941919, 1767924, 1770966, 1503265, 1410741, 1760173, 1586763, 1150572, 1244690, 1519770,
               1291389, 1108583, 1296539, 1330965, 1100587, 1061129, 919957, 592872, 680092, 724124, 911761, 1488353,
               1128186, 1090146, 1118768, 1079072, 1024052, 1537611, 1812032, 1040076, 1055155, 848462, 985512, 1505625,
               1033982, 1063818, 1287131, 1133835, 1026837, 876905, 1030428, 1305427, 1895354, 1689841, 1544979,
               1426980, 640411, 863010, 1012189, 1768932, 1737294, 828844, 808433, 863943, 834867, 911483, 1171862,
               947299, 988138, 1014609, 1686819, 1864188, 1375629, 1271187, 1225853, 1913521, 2092099, 2204246, 1570135,
               1371470, 956984, 1059238, 1097761, 1758422, 1933059, 1888533, 1026161, 894091, 954786, 1036897, 1064195,
               1043301, 1441708, 1408849, 1400903, 972009, 1023569, 1204277, 1163915, 1222078, 1293365, 1151259,
               1190667, 496405, 557846, 806233, 113238]
size_video6 = [262937, 402355, 396718, 401644, 362635, 371755, 378047, 369310, 377731, 376830, 361137, 392228, 393409,
               270051, 402588, 382535, 387627, 390276, 376130, 208832, 635339, 515017, 326855, 127719, 542090, 497231,
               497483, 458954, 424537, 542430, 477972, 353202, 385506, 454212, 392477, 315649, 379767, 395964, 278865,
               262783, 243440, 170011, 197467, 213372, 291081, 489469, 367884, 329244, 318545, 339084, 318960, 484818,
               532442, 325974, 344930, 280827, 309167, 476460, 358161, 345682, 412341, 339391, 317706, 231708, 284053,
               386946, 581043, 512468, 487744, 441686, 187087, 243323, 330139, 438359, 452135, 256994, 247405, 265930,
               252942, 284718, 353564, 301358, 323026, 320693, 548466, 604459, 430394, 415348, 434092, 602379, 627967,
               656100, 474269, 407294, 295991, 317387, 335363, 523151, 619261, 583660, 346766, 298038, 339019, 336995,
               356745, 346229, 428094, 395523, 412505, 308061, 320001, 397385, 384781, 397764, 411511, 378302, 369322,
               184943, 172081, 245799, 38806]
